(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function o(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?i.credentials="include":e.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(e){if(e.ep)return;e.ep=!0;const i=o(e);fetch(e.href,i)}})();function w(n,t){const o=n.x-t.x,r=n.y-t.y;return Math.hypot(o,r)}function S(n,t,o,r=0){const e=w(n,t),i=P(t,n),u=O(i),p=M(u,o),d=x(n,p);if(r&&(w(d,t)<r||e<o)){const f=P(n,t),m=O(f,!0),a=M(m,r);return x(t,a)}return!r&&e<=o?t:d}function O(n,t=!1){const o=A(n);return t&&o===0?{x:1,y:0}:M(n,1/o)}function x(n,t){return{x:n.x+t.x,y:n.y+t.y}}function P(n,t){return{x:n.x-t.x,y:n.y-t.y}}function M(n,t){return{x:n.x*t,y:n.y*t}}function A(n){return Math.hypot(n.x,n.y)}function q(n){const t={x:Math.floor(Math.random()*n.width),y:Math.floor(Math.random()*n.height)};function o(e){e.beginPath(),e.arc(t.x,t.y,10,0,Math.PI*2),e.closePath(),e.fillStyle="purple",e.fill()}function r(e){return w(t,e)<50}return{render:o,canDie:r}}function D(n){const t={x:n.width/2,y:n.height/2},o=n.getBoundingClientRect();window.addEventListener("mousemove",e=>{t.x=e.clientX-o.left,t.y=e.clientY-o.top}),window.addEventListener("touchstart",r),window.addEventListener("touchmove",r);function r(e){const i=e.touches[0];t.x=i.clientX-o.left,t.y=i.clientY-o.top}return{get(){return{...t}}}}function b(){const n=document.querySelector(".score");let t=0;function o(r){t+=r,n.textContent=t}return{add:o}}function C(n,t){const o=t/25,r={x:n.width/2,y:n.height/2,head:!0},e=[r];for(let c=0;c<10;c+=1)e.unshift({x:e[0].x-t,y:e[0].y});function i(c,f){const m=f.get(),a=S(r,m,o*c);r.x=a.x,r.y=a.y;for(let l=0;l<e.length-1;l+=1){const L=S(e[l],e[l+1],o*c,t);e[l].x=L.x,e[l].y=L.y}}function u(c){for(const f of e)c.beginPath(),c.arc(f.x,f.y,t,0,Math.PI*2),c.closePath(),c.fillStyle=f.head?"red":"green",c.fill(),c.stroke()}function p(){const c=x(P(e[0],e[1]),e[0]);e.unshift(c)}function d(){return{...r}}return{update:i,render:u,eat:p,getHead:d}}const s=document.querySelector("canvas"),g=s.getContext("2d");z(s);window.addEventListener("resize",()=>z(s));const H=Math.min(50,s.width/20,s.height/20),I=b(),N=D(s),h=C(s,H),y=[...Array(5)].map(()=>q(s));let E=0;v(0);function v(n){const t=Math.min(n-E,60);E=n,h.update(t,N);for(let o=0;o<y.length;o+=1)y[o].canDie(h.getHead())&&(y[o]=q(s),h.eat(),I.add(1));g.clearRect(0,0,s.width,s.height);for(const o of y)o.render(g);h.render(g),requestAnimationFrame(v)}function z(n){n.width=window.innerWidth,n.height=window.innerHeight}
